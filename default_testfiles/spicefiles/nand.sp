**********************************
**** NAND: simple example
**********************************

* Simulation setup
*------------------
*Some simulation options
.options post nomod
.option opts fast parhier=local
.options captab

*Add the 45nm CMOS library. NANDice how the path is generated by MATLAB
.lib '/users/start2016/r0364010/Master2/DDIS/DDIS1/Resources/Technology/tech_wrapper.lib ' tt

*Add the .vec file
.vec '/users/start2016/r0364010/Master2/DDIS/DDIS1/m2sfiles/nand.vec'

.tran 0.001n 10n *Do a transient simulation, final time = 5ns
.probe v i

.param supply = 0.7


* Voltage sources -> inputs are now provided in the .vec files, so disable them here
*-----------------
* name pin1 pin2 type 
* pulseparameters:(init, pulsedVal, delay, rise, fall, pulse width, period)
*Vin1 in1  vss pulse 0 supply 0.99p 20p 20p 2n 3n
*Vin2 in2  vss pulse 0 supply 0.99p 20p 20p 1n 2n

Vdd vdd vss supply
Vss vss 0 0 


* Simulated circuit
*-------------------
*Creation of a NAND gate in the circuit

* many NAND gates:
XNAND1 in1 in2 out vdd vss MYNAND multfac=1

 * add a capacitor
Cap out vss 10f



* Subcircuits
*-------------
.SUBCKT MYNAND input1 input2 output vdd vss multfac='1'
*    drain  gate   src  bulk
xMn1 dn1    input1 vss  vss MOSN w='multfac*1.5*120e-9' l='45e-9' * extra factor b/c series -> extra node that has capacitance
xMn2 output input2 dn1  vss MOSN w='multfac*1.5*120e-9' l='45e-9'

xMp1 output input1 vdd  vdd MOSP w='multfac*120e-9' l='45e-9' * not *2 b/c pMOS in parallel for NAND -> only half size needed
xMp2 output input2 vdd  vdd MOSP w='multfac*120e-9' l='45e-9'
.ENDS MYNAND

.END
